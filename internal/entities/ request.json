{
  "model": "gpt-4.1-mini",
  "messages": [
    { "role": "user", "content": "Какая погода сейчас в Москве?" }
  ],
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "get_weather",
        "description": "Возвращает текущую погоду в указанном городе",
        "parameters": {
          "type": "object",
          "properties": {
            "city": { "type": "string", "description": "Город, например 'Москва'" },
            "units": { "type": "string", "enum": ["c", "f"], "description": "Единицы измерения" }
          },
          "required": ["city"]
        }
      }
    }
  ],
  "tool_choice": "auto"
}
{
  "id": "chat-id-b9573583-0665-45f8-8dc0-ba9dfb196f8e",
  "object": "chat.completion",
  "created": 1771764148,
  "model": "gpt-4.1-mini",
  "choices": [
    {
      "message": {
        "role": "assistant",
        "content": "",
        "tool_calls": [
          {
            "index": 0,
            "id": "callr1ztH",
            "type": "function",
            "function": {
              "name": "get_weather",
              "arguments": "{\"city\":\"Москва\",\"units\":\"c\"}"
            }
          }
        ]
      },
      "finish_reason": "tool_calls",
      "index": 0
    }
  ],
  "usage": {
    "prompt_tokens": 79,
    "prompt_tokens_details": {},
    "completion_tokens": 93,
    "completion_tokens_details": {
      "reasoning_tokens": 64
    },
    "total_tokens": 172,
    "total_time": 1.802,
    "cost_request": 0.007,
    "free_request": false
  }
}
{
  "model": "gpt-4.1-mini",
  "messages": [
    { "role": "user", "content": "Какая погода сейчас в Москве? Используй инструмент." },

    {
      "role": "assistant",
      "content": "",
      "tool_calls": [
        {
          "id": "callr1ztH",
          "type": "function",
          "function": {
            "name": "get_weather",
            "arguments": "{\"city\":\"Москва\",\"units\":\"c\"}"
          }
        }
      ]
    },

    {
      "role": "tool",
      "tool_call_id": "callr1ztH",
      "content": "{\"temp_c\":-3,\"condition\":\"пасмурно\"}"
    }
  ]
}
{
  "id": "chat-id-1c0ae2b7-7034-4e13-8208-9029798256b4",
  "object": "chat.completion",
  "created": 1771764353,
  "model": "gpt-4.1-mini",
  "choices": [
    {
      "message": {
        "role": "assistant",
        "content": "Сейчас в Москве пасмурно, температура около -3°C."
      },
      "finish_reason": "stop",
      "index": 0
    }
  ],
  "usage": {
    "prompt_tokens": 57,
    "prompt_tokens_details": {},
    "completion_tokens": 16,
    "completion_tokens_details": {
      "reasoning_tokens": 0
    },
    "total_tokens": 73,
    "total_time": 4.978,
    "cost_request": 0.002,
    "free_request": false
  }
}